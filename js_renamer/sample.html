<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript Renamer Test Sample</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        h1 {
            color: #667eea;
            margin-bottom: 20px;
            text-align: center;
        }
        h2 {
            color: #764ba2;
            margin-top: 30px;
            margin-bottom: 15px;
            border-bottom: 2px solid #667eea;
            padding-bottom: 5px;
        }
        .section {
            margin-bottom: 30px;
        }
        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
            transition: transform 0.2s;
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        input[type="text"], input[type="number"] {
            padding: 10px;
            border: 2px solid #667eea;
            border-radius: 5px;
            font-size: 14px;
            margin: 5px;
            width: 200px;
        }
        .output {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            margin-top: 10px;
            min-height: 50px;
            font-family: 'Courier New', monospace;
        }
        .counter-display {
            font-size: 48px;
            text-align: center;
            color: #667eea;
            margin: 20px 0;
            font-weight: bold;
        }
        .task-item {
            background: #f9f9f9;
            padding: 10px;
            margin: 5px 0;
            border-radius: 5px;
            border-left: 4px solid #667eea;
        }
        .hover-box {
            width: 200px;
            height: 100px;
            background: #667eea;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 5px;
            margin: 10px 0;
            transition: all 0.3s;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>JavaScript Renamer Test Sample</h1>
        <p>This HTML file tests all features of the JavaScript Renamer v3.0</p>

        <!-- Section 1: Counter with multiple scopes -->
        <div class="section">
            <h2>1. Counter (Global & Local Variables)</h2>
            <div class="counter-display" id="counterDisplay">0</div>
            <button id="btnIncrement">Increment</button>
            <button id="btnDecrement">Decrement</button>
            <button id="btnReset">Reset</button>
        </div>

        <!-- Section 2: Name formatter with inline handlers -->
        <div class="section">
            <h2>2. Name Formatter (Inline Event Handlers)</h2>
            <input type="text" id="firstName" placeholder="First Name" value="John">
            <input type="text" id="lastName" placeholder="Last Name" value="Doe">
            <button onclick="formatName()">Format Name</button>
            <button ondblclick="clearNames()">Double-Click to Clear</button>
            <div class="output" id="nameOutput">Formatted name will appear here</div>
        </div>

        <!-- Section 3: Calculator with class -->
        <div class="section">
            <h2>3. Calculator (Class with Methods)</h2>
            <input type="number" id="num1" placeholder="Number 1" value="10">
            <input type="number" id="num2" placeholder="Number 2" value="5">
            <button id="btnAdd">Add</button>
            <button id="btnMultiply">Multiply</button>
            <div class="output" id="calcOutput">Result will appear here</div>
        </div>

        <!-- Section 4: Task manager with arrow functions -->
        <div class="section">
            <h2>4. Task Manager (Arrow Functions & Event Parameters)</h2>
            <input type="text" id="taskInput" placeholder="Enter task">
            <button id="btnAddTask">Add Task</button>
            <div id="taskList"></div>
        </div>

        <!-- Section 5: Hover effects -->
        <div class="section">
            <h2>5. Hover Effects (Inline Mouse Handlers)</h2>
            <div class="hover-box" 
                 id="hoverBox"
                 onmouseover="handleMouseOver()"
                 onmouseout="handleMouseOut()">
                Hover over me!
            </div>
        </div>
    </div>

    <!-- Script Block 1: Global configuration and counter -->
    <script>
        // Global variables for testing
        const CONFIG = {
            maxCounter: 100,
            minCounter: -100,
            theme: 'purple'
        };

        let globalCounter = 0;
        let counterHistory = [];

        // Counter functions with nested scopes
        function incrementCounter() {
            if (globalCounter < CONFIG.maxCounter) {
                globalCounter++;
                counterHistory.push(globalCounter);
                updateCounterDisplay();
            }
        }

        function decrementCounter() {
            if (globalCounter > CONFIG.minCounter) {
                globalCounter--;
                counterHistory.push(globalCounter);
                updateCounterDisplay();
            }
        }

        function resetCounter() {
            const previousValue = globalCounter;
            globalCounter = 0;
            counterHistory = [];
            updateCounterDisplay();
            console.log('Counter reset from ' + previousValue + ' to 0');
        }

        function updateCounterDisplay() {
            const displayElement = document.getElementById('counterDisplay');
            displayElement.textContent = globalCounter;
            
            // Nested scope with same variable name
            if (globalCounter > 50) {
                const message = 'High value!';
                displayElement.style.color = '#e74c3c';
                console.log(message);
            } else if (globalCounter < -50) {
                const message = 'Low value!';
                displayElement.style.color = '#3498db';
                console.log(message);
            } else {
                const message = 'Normal value';
                displayElement.style.color = '#667eea';
                console.log(message);
            }
        }
    </script>

    <!-- Script Block 2: Name formatter with inline handler functions -->
    <script>
        // Functions called by inline event handlers
        function formatName() {
            const firstNameInput = document.getElementById('firstName');
            const lastNameInput = document.getElementById('lastName');
            const outputDiv = document.getElementById('nameOutput');
            
            const firstName = firstNameInput.value.trim();
            const lastName = lastNameInput.value.trim();
            
            if (firstName && lastName) {
                const fullName = lastName.toUpperCase() + ', ' + firstName;
                outputDiv.textContent = 'Formatted: ' + fullName;
                outputDiv.style.color = '#27ae60';
            } else {
                outputDiv.textContent = 'Please enter both names';
                outputDiv.style.color = '#e74c3c';
            }
        }

        function clearNames() {
            document.getElementById('firstName').value = '';
            document.getElementById('lastName').value = '';
            document.getElementById('nameOutput').textContent = 'Names cleared';
        }

        function handleMouseOver() {
            const box = document.getElementById('hoverBox');
            box.style.transform = 'scale(1.1)';
            box.style.background = '#764ba2';
            box.textContent = 'You are hovering!';
        }

        function handleMouseOut() {
            const box = document.getElementById('hoverBox');
            box.style.transform = 'scale(1)';
            box.style.background = '#667eea';
            box.textContent = 'Hover over me!';
        }
    </script>

    <!-- Script Block 3: Calculator class -->
    <script>
        // Calculator class with methods
        class Calculator {
            constructor() {
                this.result = 0;
                this.history = [];
            }

            add(a, b) {
                const sum = a + b;
                this.result = sum;
                this.history.push({ operation: 'add', result: sum });
                return sum;
            }

            multiply(a, b) {
                const product = a * b;
                this.result = product;
                this.history.push({ operation: 'multiply', result: product });
                return product;
            }

            getLastResult() {
                return this.result;
            }

            clearHistory() {
                this.history = [];
                this.result = 0;
            }
        }

        // Create global calculator instance
        const calculator = new Calculator();

        function performAddition() {
            const num1 = parseFloat(document.getElementById('num1').value);
            const num2 = parseFloat(document.getElementById('num2').value);
            const result = calculator.add(num1, num2);
            displayCalculatorResult('Addition', num1, num2, result);
        }

        function performMultiplication() {
            const num1 = parseFloat(document.getElementById('num1').value);
            const num2 = parseFloat(document.getElementById('num2').value);
            const result = calculator.multiply(num1, num2);
            displayCalculatorResult('Multiplication', num1, num2, result);
        }

        function displayCalculatorResult(operation, num1, num2, result) {
            const outputDiv = document.getElementById('calcOutput');
            outputDiv.textContent = operation + ': ' + num1 + ' and ' + num2 + ' = ' + result;
            outputDiv.style.color = '#667eea';
        }
    </script>

    <!-- Script Block 4: Task manager with arrow functions and event parameters -->
    <script>
        // Task manager using arrow functions
        const taskManager = {
            tasks: [],
            nextId: 1,

            addTask: function(taskText) {
                const task = {
                    id: this.nextId++,
                    text: taskText,
                    completed: false
                };
                this.tasks.push(task);
                this.render();
            },

            removeTask: function(taskId) {
                this.tasks = this.tasks.filter(task => task.id !== taskId);
                this.render();
            },

            toggleTask: function(taskId) {
                const task = this.tasks.find(t => t.id === taskId);
                if (task) {
                    task.completed = !task.completed;
                    this.render();
                }
            },

            render: function() {
                const taskList = document.getElementById('taskList');
                taskList.innerHTML = '';
                
                this.tasks.forEach(task => {
                    const taskDiv = document.createElement('div');
                    taskDiv.className = 'task-item';
                    taskDiv.innerHTML = `
                        <span style="text-decoration: ${task.completed ? 'line-through' : 'none'}">
                            ${task.text}
                        </span>
                    `;
                    
                    // Arrow function with event parameter
                    taskDiv.onclick = (e) => {
                        this.toggleTask(task.id);
                    };
                    
                    // Another arrow function with event parameter
                    taskDiv.ondblclick = (evt) => {
                        this.removeTask(task.id);
                    };
                    
                    taskList.appendChild(taskDiv);
                });
            }
        };

        function handleAddTask() {
            const input = document.getElementById('taskInput');
            const taskText = input.value.trim();
            
            if (taskText) {
                taskManager.addTask(taskText);
                input.value = '';
            }
        }
    </script>

    <!-- Script Block 5: Event listeners with arrow functions -->
    <script>
        // Setup event listeners when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            // Counter buttons
            const btnIncrement = document.getElementById('btnIncrement');
            const btnDecrement = document.getElementById('btnDecrement');
            const btnReset = document.getElementById('btnReset');

            btnIncrement.addEventListener('click', (event) => {
                incrementCounter();
            });

            btnDecrement.addEventListener('click', (event) => {
                decrementCounter();
            });

            btnReset.addEventListener('click', (event) => {
                resetCounter();
            });

            // Calculator buttons
            const btnAdd = document.getElementById('btnAdd');
            const btnMultiply = document.getElementById('btnMultiply');

            btnAdd.onclick = (e) => {
                performAddition();
            };

            btnMultiply.onclick = (e) => {
                performMultiplication();
            };

            // Task manager button
            const btnAddTask = document.getElementById('btnAddTask');
            btnAddTask.addEventListener('click', (e) => {
                handleAddTask();
            });

            // Allow Enter key to add task
            const taskInput = document.getElementById('taskInput');
            taskInput.addEventListener('keypress', (event) => {
                if (event.key === 'Enter') {
                    handleAddTask();
                }
            });

            console.log('JavaScript Renamer Test Sample loaded successfully!');
        });
    </script>

    <!-- Script Block 6: Advanced scope testing with nested functions -->
    <script>
        // Test nested scopes and same variable names
        function outerFunction() {
            let scopeTest = 'outer';
            let outerOnly = 'outer variable';
            
            function middleFunction() {
                let scopeTest = 'middle';  // Same name, different scope
                let middleOnly = 'middle variable';
                
                function innerFunction() {
                    let scopeTest = 'inner';  // Same name, different scope
                    let innerOnly = 'inner variable';
                    
                    console.log('Inner scope test:', scopeTest);
                    console.log('Can access outer:', outerOnly);
                    console.log('Can access middle:', middleOnly);
                    
                    return scopeTest + ' ' + middleOnly + ' ' + outerOnly;
                }
                
                console.log('Middle scope test:', scopeTest);
                return innerFunction();
            }
            
            console.log('Outer scope test:', scopeTest);
            return middleFunction();
        }

        // Test multiple parameters with same names in different functions
        function processData(data, index, callback) {
            const result = callback(data, index);
            return result;
        }

        function transformData(data, index) {
            return data.map((item, index) => {
                // 'index' parameter shadows outer 'index'
                return item * index;
            });
        }

        // Test try-catch with error parameter
        function handleError() {
            try {
                const riskyOperation = Math.random();
                if (riskyOperation < 0.5) {
                    throw new Error('Random error occurred');
                }
            } catch (error) {
                // 'error' is catch clause parameter
                console.error('Caught error:', error.message);
                return false;
            }
            return true;
        }

        // Test for loop with variable declaration
        function loopTest() {
            const results = [];
            for (let i = 0; i < 10; i++) {
                const squared = i * i;
                results.push(squared);
            }
            
            // Another loop with same variable names in different scope
            for (let i = 0; i < 5; i++) {
                const squared = i * i * i;  // Same name, different scope
                results.push(squared);
            }
            
            return results;
        }

        // Test object destructuring
        function destructureTest() {
            const user = { name: 'Alice', age: 30, city: 'Tokyo' };
            const { name, age, city } = user;
            
            const coordinates = [10, 20, 30];
            const [x, y, z] = coordinates;
            
            return { name, age, city, x, y, z };
        }
    </script>

    <!-- Script Block 7: Class inheritance and static methods -->
    <script>
        // Base class
        class Shape {
            constructor(color) {
                this.color = color;
                this.created = new Date();
            }

            getColor() {
                return this.color;
            }

            setColor(newColor) {
                this.color = newColor;
            }

            static createRandom() {
                const colors = ['red', 'blue', 'green', 'yellow'];
                const randomColor = colors[Math.floor(Math.random() * colors.length)];
                return new Shape(randomColor);
            }
        }

        // Derived class
        class Circle extends Shape {
            constructor(color, radius) {
                super(color);
                this.radius = radius;
            }

            getArea() {
                const pi = Math.PI;
                const area = pi * this.radius * this.radius;
                return area;
            }

            getCircumference() {
                const pi = Math.PI;
                const circumference = 2 * pi * this.radius;
                return circumference;
            }

            static createUnit(color) {
                return new Circle(color, 1);
            }
        }

        // Another derived class
        class Rectangle extends Shape {
            constructor(color, width, height) {
                super(color);
                this.width = width;
                this.height = height;
            }

            getArea() {
                const area = this.width * this.height;
                return area;
            }

            getPerimeter() {
                const perimeter = 2 * (this.width + this.height);
                return perimeter;
            }

            isSquare() {
                return this.width === this.height;
            }
        }

        // Test class instances
        const redCircle = new Circle('red', 5);
        const blueRectangle = new Rectangle('blue', 10, 20);
        const randomShape = Shape.createRandom();
    </script>

    <!-- Script Block 8: Async/await and promises -->
    <script>
        // Async function with await
        async function fetchData(url) {
            try {
                const response = await fetch(url);
                const data = await response.json();
                return data;
            } catch (error) {
                console.error('Fetch error:', error);
                throw error;
            }
        }

        // Promise-based function
        function delayedOperation(ms) {
            return new Promise((resolve, reject) => {
                if (ms < 0) {
                    reject(new Error('Negative delay not allowed'));
                } else {
                    setTimeout(() => {
                        resolve('Operation completed after ' + ms + 'ms');
                    }, ms);
                }
            });
        }

        // Async function with multiple awaits
        async function sequentialOperations() {
            const result1 = await delayedOperation(100);
            console.log(result1);
            
            const result2 = await delayedOperation(200);
            console.log(result2);
            
            const result3 = await delayedOperation(300);
            console.log(result3);
            
            return [result1, result2, result3];
        }

        // Promise.all for parallel operations
        async function parallelOperations() {
            const promises = [
                delayedOperation(100),
                delayedOperation(200),
                delayedOperation(300)
            ];
            
            const results = await Promise.all(promises);
            return results;
        }

        // Generator function
        function* numberGenerator(max) {
            let current = 0;
            while (current < max) {
                const value = current * current;
                yield value;
                current++;
            }
        }

        // Using generator
        function testGenerator() {
            const gen = numberGenerator(5);
            const results = [];
            
            for (const value of gen) {
                results.push(value);
            }
            
            return results;
        }
    </script>

    <!-- Script Block 9: Advanced array methods and closures -->
    <script>
        // Closure example
        function createCounter(initialValue) {
            let count = initialValue;
            
            return {
                increment: function() {
                    count++;
                    return count;
                },
                decrement: function() {
                    count--;
                    return count;
                },
                getValue: function() {
                    return count;
                },
                reset: function() {
                    count = initialValue;
                    return count;
                }
            };
        }

        // Multiple counters with closures
        const counter1 = createCounter(0);
        const counter2 = createCounter(100);

        // Array methods with callbacks
        function arrayOperations() {
            const numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
            
            // Map with different parameter names
            const doubled = numbers.map((num) => num * 2);
            const tripled = numbers.map((value) => value * 3);
            
            // Filter with different parameter names
            const evens = numbers.filter((n) => n % 2 === 0);
            const odds = numbers.filter((number) => number % 2 !== 0);
            
            // Reduce with different parameter names
            const sum = numbers.reduce((accumulator, current) => accumulator + current, 0);
            const product = numbers.reduce((acc, val) => acc * val, 1);
            
            // forEach with index
            const indexed = [];
            numbers.forEach((item, index) => {
                indexed.push({ value: item, position: index });
            });
            
            // Find and findIndex
            const firstEven = numbers.find((x) => x % 2 === 0);
            const firstEvenIndex = numbers.findIndex((x) => x % 2 === 0);
            
            // Some and every
            const hasEven = numbers.some((n) => n % 2 === 0);
            const allPositive = numbers.every((n) => n > 0);
            
            return {
                doubled, tripled, evens, odds, sum, product,
                indexed, firstEven, firstEvenIndex, hasEven, allPositive
            };
        }

        // Currying example
        function multiply(a) {
            return function(b) {
                return function(c) {
                    return a * b * c;
                };
            };
        }

        const multiplyBy2 = multiply(2);
        const multiplyBy2And3 = multiplyBy2(3);
        const result = multiplyBy2And3(4); // 2 * 3 * 4 = 24

        // Memoization example
        function memoize(fn) {
            const cache = {};
            
            return function(arg) {
                if (cache[arg] !== undefined) {
                    console.log('Returning cached result for:', arg);
                    return cache[arg];
                }
                
                const result = fn(arg);
                cache[arg] = result;
                return result;
            };
        }

        function expensiveCalculation(n) {
            console.log('Calculating for:', n);
            let sum = 0;
            for (let i = 0; i < n; i++) {
                sum += i * i;
            }
            return sum;
        }

        const memoizedCalculation = memoize(expensiveCalculation);
    </script>

    <!-- Script Block 10: Event handling patterns and delegation -->
    <script>
        // Event delegation pattern
        const eventDelegator = {
            handlers: {},
            
            on: function(selector, eventType, handler) {
                const key = selector + '::' + eventType;
                if (!this.handlers[key]) {
                    this.handlers[key] = [];
                }
                this.handlers[key].push(handler);
            },
            
            off: function(selector, eventType, handler) {
                const key = selector + '::' + eventType;
                if (this.handlers[key]) {
                    this.handlers[key] = this.handlers[key].filter(h => h !== handler);
                }
            },
            
            trigger: function(selector, eventType, eventData) {
                const key = selector + '::' + eventType;
                if (this.handlers[key]) {
                    this.handlers[key].forEach(handler => {
                        handler(eventData);
                    });
                }
            }
        };

        // Custom event emitter
        class EventEmitter {
            constructor() {
                this.events = {};
            }

            on(eventName, callback) {
                if (!this.events[eventName]) {
                    this.events[eventName] = [];
                }
                this.events[eventName].push(callback);
            }

            emit(eventName, data) {
                const callbacks = this.events[eventName];
                if (callbacks) {
                    callbacks.forEach(callback => {
                        callback(data);
                    });
                }
            }

            off(eventName, callback) {
                const callbacks = this.events[eventName];
                if (callbacks) {
                    this.events[eventName] = callbacks.filter(cb => cb !== callback);
                }
            }
        }

        const emitter = new EventEmitter();
        
        emitter.on('dataLoaded', (data) => {
            console.log('Data loaded:', data);
        });
        
        emitter.on('error', (error) => {
            console.error('Error occurred:', error);
        });

        // Debounce function
        function debounce(func, delay) {
            let timeoutId;
            
            return function(...args) {
                clearTimeout(timeoutId);
                
                timeoutId = setTimeout(() => {
                    func.apply(this, args);
                }, delay);
            };
        }

        // Throttle function
        function throttle(func, limit) {
            let inThrottle;
            
            return function(...args) {
                if (!inThrottle) {
                    func.apply(this, args);
                    inThrottle = true;
                    
                    setTimeout(() => {
                        inThrottle = false;
                    }, limit);
                }
            };
        }

        // Usage examples
        const debouncedSearch = debounce((query) => {
            console.log('Searching for:', query);
        }, 300);

        const throttledScroll = throttle((event) => {
            console.log('Scroll position:', window.scrollY);
        }, 100);
    </script>
</body>
</html>
